<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CSAPP阅读 | Along&#39;s programming blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="programming, learning or working">
    
    <link rel="preload" href="/assets/css/0.styles.99d3a504.css" as="style"><link rel="preload" href="/assets/js/app.6ab81a05.js" as="script"><link rel="preload" href="/assets/js/6.28ea8b1c.js" as="script"><link rel="preload" href="/assets/js/16.9c359298.js" as="script"><link rel="prefetch" href="/assets/js/10.4f4908ff.js"><link rel="prefetch" href="/assets/js/11.e45424ae.js"><link rel="prefetch" href="/assets/js/12.e46fa3d5.js"><link rel="prefetch" href="/assets/js/13.a5241ab0.js"><link rel="prefetch" href="/assets/js/14.bcfd35e3.js"><link rel="prefetch" href="/assets/js/15.6fa283ff.js"><link rel="prefetch" href="/assets/js/17.55d29e7f.js"><link rel="prefetch" href="/assets/js/18.6ab20aff.js"><link rel="prefetch" href="/assets/js/19.4bdb72e1.js"><link rel="prefetch" href="/assets/js/20.e558a818.js"><link rel="prefetch" href="/assets/js/21.a0db5d16.js"><link rel="prefetch" href="/assets/js/22.b72b8dad.js"><link rel="prefetch" href="/assets/js/23.5f62d637.js"><link rel="prefetch" href="/assets/js/24.51a1732f.js"><link rel="prefetch" href="/assets/js/25.17f13504.js"><link rel="prefetch" href="/assets/js/26.ceed79c0.js"><link rel="prefetch" href="/assets/js/27.3179c5c0.js"><link rel="prefetch" href="/assets/js/28.89d03b7d.js"><link rel="prefetch" href="/assets/js/29.e415aaf1.js"><link rel="prefetch" href="/assets/js/7.de20ebd7.js"><link rel="prefetch" href="/assets/js/8.c0e47c13.js"><link rel="prefetch" href="/assets/js/9.570f3d07.js"><link rel="prefetch" href="/assets/js/mermaid.a3b878cd.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.030d0c7b.js"><link rel="prefetch" href="/assets/js/vendors~mermaid.d5a5d658.js"><link rel="prefetch" href="/assets/js/vendors~reveal.a80e7ca2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.99d3a504.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Along's programming blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网站搭建" class="dropdown-title"><span class="title">网站搭建</span> <span class="arrow down"></span></button> <button type="button" aria-label="网站搭建" class="mobile-dropdown-title"><span class="title">网站搭建</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://coder.itclan.cn/fontend/tools/vuepress-build-blog/#%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer" class="nav-link external">
  搭建教程参考
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/alonglyn/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客仓库地址
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网站搭建" class="dropdown-title"><span class="title">网站搭建</span> <span class="arrow down"></span></button> <button type="button" aria-label="网站搭建" class="mobile-dropdown-title"><span class="title">网站搭建</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://coder.itclan.cn/fontend/tools/vuepress-build-blog/#%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer" class="nav-link external">
  搭建教程参考
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/alonglyn/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客仓库地址
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>CSAPP阅读</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/tech/csapp.html#参考资料" class="sidebar-link">参考资料</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/tech/csapp.html#学习检查点" class="sidebar-link">学习检查点</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/tech/csapp.html#个人笔记" class="sidebar-link">个人笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/tech/csapp.html#第一章" class="sidebar-link">第一章</a></li><li class="sidebar-sub-header"><a href="/blog/tech/csapp.html#第二章-机器指令和程序" class="sidebar-link">第二章：机器指令和程序</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="csapp阅读"><a href="#csapp阅读" class="header-anchor">#</a> CSAPP阅读</h1> <h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <p><a href="https://wdxtub.com/csapp/thin-csapp-0/2016/04/16/" target="_blank" rel="noopener noreferrer">读薄csapp博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://hansimov.gitbook.io/csapp/" target="_blank" rel="noopener noreferrer">csapp gitbook电子书<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://github.com/wangmu89/Book-CSAPP/blob/master/_Attachments/Computer_Systems_A_Programmers_Perspective(3rd).pdf" target="_blank" rel="noopener noreferrer">csapp 英文原版pdf<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://github.com/imarvinle/awesome-cs-books#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F" target="_blank" rel="noopener noreferrer">编程书籍汇总<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="学习检查点"><a href="#学习检查点" class="header-anchor">#</a> 学习检查点</h2> <blockquote><p>本环节可以理解成大学学习中的作业， 目的是为了让学习真正产生效果。 作业会从讨论和博客，实验两个角度入手， 考察理解和实践的能力。 每个项目的checkList由大家补充投票定义， 靠自觉完成。</p></blockquote> <p>书本阅读讨论和博客，大概每周/双周一篇
TODO</p> <p>实验
TODO</p> <h2 id="个人笔记"><a href="#个人笔记" class="header-anchor">#</a> 个人笔记</h2> <blockquote><p>说明:本文就是阅读<a href="https://wdxtub.com/csapp/thin-csapp-1/2016/04/16/" target="_blank" rel="noopener noreferrer">《读薄csapp》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>系列博客的再抽象、理解记录。适合</p></blockquote> <h3 id="第一章"><a href="#第一章" class="header-anchor">#</a> 第一章</h3> <h4 id="学习目标"><a href="#学习目标" class="header-anchor">#</a> 学习目标</h4> <ol><li>理解计算机系统的复杂与和理论抽象描述的不同</li> <li>理解内存中数据的保存形式，以及这种方式的好处以及限制</li> <li>注意避开一些常见的关于计算机的迷思</li> <li>区别整型和浮点数的表达机制，并理解为什么会有这种差异</li> <li>简单理解溢出出现的条件</li></ol> <p><strong>计算机不只是执行程序的机器</strong></p> <blockquote><p>现代计算机的冯诺依曼的结构</p></blockquote> <p><strong>很多东西不像看起来那么简单</strong></p> <blockquote><ol><li>时空复杂度， 在多线程甚至分布式并行计算的条件下， 需要特别考虑，比如是否能拆分并行运算， 是否会线程安全。</li> <li>计算机的数学运算存在溢出和精度问题</li> <li>很多算法，思想的设计， 往往都很难最优， 而是在限制下比较好的一种<strong>权衡</strong>，比如时间换空间，锁机制。</li></ol></blockquote> <p><strong>内存里多的是我们不知道的事</strong></p> <blockquote><ol><li>内存问题在实践中特别容易发生，排查起来也非常困难（典型的是内存泄漏、野指针、悬垂指针，多线程问题）</li></ol></blockquote> <h4 id="比特心生"><a href="#比特心生" class="header-anchor">#</a> 比特心生</h4> <p>计算机的任何指令、数据都是二进制表示的。而现实生活中的数字往往是10进制表示的。而为了让2进制读起来更快、写起来更少、记起来也不会太多， 2进制4位为一组，生成了16进制。
也就是说我们需要背一下16进制。但实际上，16进制基本上和10进制类似， 所以2进制到16进制的转换一般经过10进制。
比如1-9 -&gt; 1-9, 10-15 -&gt; A-F</p> <p>而二进制的4位， 为了更好算有一点， 我们拆成2组，前2位一组，后2位1组。
比如<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1011</mn><mo>=</mo><mn>10</mn><mo>&lt;</mo><mo>&lt;</mo><mn>2</mn><mo>+</mo><mn>11</mn><mo>=</mo><mn>10</mn><mo>∗</mo><mn>2</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>4</mn><mo>∗</mo><mn>2</mn><mo>+</mo><mn>3</mn><mo>=</mo><mn>8</mn><mo>+</mo><mn>3</mn><mo>=</mo><mn>11</mn></mrow><annotation encoding="application/x-tex">1011=10&lt;&lt;2+11=10*2+1=4*2+3=8+3=11</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1011</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord">10</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">11</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">10</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">11</span></span></span></span></p> <p>这样拆分的好处就是，我们只需要背下2位二进制的映射就行了。也就是</p> <table><thead><tr><th>2机制b</th> <th>10进制d</th> <th>16进制h</th></tr></thead> <tbody><tr><td>1001</td> <td>2*4+1</td> <td>9</td></tr> <tr><td>1010</td> <td>2*4+2</td> <td>A</td></tr> <tr><td>1011</td> <td>2*4+3</td> <td>B</td></tr> <tr><td>1100</td> <td>3*4+0</td> <td>C</td></tr> <tr><td>1101</td> <td>3*4+1</td> <td>D</td></tr> <tr><td>1110</td> <td>3*4+2</td> <td>E</td></tr> <tr><td>1111</td> <td>15</td> <td>F</td></tr></tbody></table> <p>而对于10进制与16进制的转换，我们只要管A-F 与 10-15的转换。好在我们从小写选择题以及让我们建立了A-E -&gt; 1-5 -&gt; 1+9-4+9 -&gt; 10-14的映射。 最后剩下个F，就是1111就是15啊，多好记。（/wink)</p> <h4 id="整数"><a href="#整数" class="header-anchor">#</a> 整数</h4> <p><strong>整型表示的特点</strong></p> <p>我们知道对于计算机里的二进制，有符号数和无符号数改变的只是该部分内存的类型，而不改变吗值本身。</p> <p>所以为了让相同位数w的无符号（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>→</mo><msup><mn>2</mn><mi>w</mi></msup><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">0\to2^w-1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>和有符号数能够比较容易地对应上，
我们直接让一半数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>→</mo><msup><mn>2</mn><mrow><mi>w</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0 \to 2^{w-1}-1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>的解释不变，
剩下的一半数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mi>w</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>→</mo><msup><mn>2</mn><mi>w</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^{w-1}\to2^w-1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>， 让他直接往回调一圈(即<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><msup><mn>2</mn><mi>w</mi></msup></mrow><annotation encoding="application/x-tex">-2^w</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span></span></span></span></span></span></span>)，变成<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><msup><mn>2</mn><mrow><mi>w</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>→</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-2^{w-1}\to-1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span></p> <p>这样做的好处有</p> <ol><li>小的数在有符号和无符号的数在<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>→</mo><msup><mn>2</mn><mrow><mi>w</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0 \to 2^{w-1}-1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>上完全一致</li> <li>无符号数越小，对应的有符号数的负数也越小。</li> <li>有符号数的负数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mi mathvariant="normal">%</mi><msup><mn>2</mn><mi>w</mi></msup><mo>=</mo><mo>=</mo><mi>x</mi><mo>+</mo><msup><mn>2</mn><mi>w</mi></msup></mrow><annotation encoding="application/x-tex">x\%2^{w} == x+2^{w}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord mathnormal">x</span><span class="mord">%</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">==</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span></span></span></span></span></span></span></span></li></ol> <p><img src="https://wdxtub.com/images/csapp/14609257940557.jpg" alt=""></p> <p><strong>C语言中signed和unsigned的比较</strong></p> <p>2个原则</p> <ol><li>C语言中常量默认是有符号数, 除非显式加上<code>U</code>后缀</li> <li>有符号和无符号数做运算时，会都当做无符号数做比较比如<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn><mo>&lt;</mo><mn>0</mn><mo separator="true">,</mo><mo>−</mo><mn>1</mn><mo>&gt;</mo><mn>0</mn><mi>U</mi></mrow><annotation encoding="application/x-tex">-1&lt;0, -1&gt;0U</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></span></span></span></li></ol> <p><strong>截取和拓展</strong></p> <p>位多的数往位低的数转换时，需要截取保留低位， 相反需要拓展高位。
截取和拓展其实从十进制看来是很直觉的，即向下兼容。</p> <ul><li>对于拓展，其实就是10进制保持不变（也即正数给补0， 负数给补1)</li> <li>对于截取，不区分正负数直接截取l(比如下面代码的结果)</li></ul> <div class="language-c++ line-numbers-mode"><pre class="language-text"><code>#include &lt;cstdio&gt;
int main() {
    int a = 0x7fffffff;
    short b = (short)a;
    int c = 0xffffffff;
    short d = (short)c;
    int e = 0xffff7fff;
    short f = (short)e;
    printf(&quot;%d-&gt;%d, %d-&gt;%d, %d-&gt;%d&quot;, a,b,c,d,e,f);
    return 0;
}
//2147483647-&gt;-1, -1-&gt;-1, -32769-&gt;32767
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="浮点数"><a href="#浮点数" class="header-anchor">#</a> 浮点数</h4> <p>浮点数这个名字起得很不错，其实就是在整数的<u><strong>位中间加了个点</strong></u>。
点左边的叫整数部分，右边的叫小数部分。
也可以看成是一个整数，除上了<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>t</mi></msup><mo stretchy="false">(</mo><mi>t</mi><mtext>是小数的位数</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">2^{t} (t是小数的位数)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.043556em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7935559999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mord cjk_fallback">是小数的位数</span><span class="mclose">)</span></span></span></span></p> <p><strong>IEEE 浮点数标准</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>u</mi><mi>e</mi><mo>=</mo><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mi>s</mi></msup><mi>M</mi><msup><mn>2</mn><mi>E</mi></msup></mrow><annotation encoding="application/x-tex">value=(-1)^{s}M2^{E}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">u</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.0913309999999998em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span></span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">E</span></span></span></span></span></span></span></span></span></span></span></span> <img src="https://wdxtub.com/images/csapp/14609515849125.jpg" alt=""> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mn>10</mn></msub><mo>=</mo><mi>e</mi><mi>x</mi><msub><mi>p</mi><mn>2</mn></msub><mo separator="true">,</mo><mi>M</mi><mo>=</mo><mn>1</mn><mo>+</mo><mi>f</mi><mi>r</mi><mi>a</mi><msub><mi>c</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mtext>表示的小数是</mtext><mn>0.</mn><mi>x</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>x</mi><mo>≠</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">E_{10}=exp_{2}, M=1+frac_2(frac表示的小数是0.x...., x\not ={0})</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord cjk_fallback">表示的小数是</span><span class="mord">0.</span><span class="mord mathnormal">x</span><span class="mord">....</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">0</span></span><span class="mclose">)</span></span></span></span>
其中exp是一个有符号数E的移码。</p> <p><strong>浮点数的无穷和0</strong></p> <ul><li><p>浮点数的范围
浮点数其实就是二进制的科学计数法。 浮点数的标识范围取决于指数的位数， 可以通过改变指数的大小， 来调整数值部分浮点的位置。那当一个运算，指数部分超过了指数的表示范围。则为无穷（全1）或0（全0）。也就是绝对值太大和绝对值太小的数，无法表示了。 这是浮点数的范围</p></li> <li><p>浮点数的精度
浮点数的精度取决于数值部分的位数。假设有f位， 那么比<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mo>−</mo><mi>f</mi></mrow></msup></mrow><annotation encoding="application/x-tex">2^{-f}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8491079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span></span></span></span></span></span></span></span></span></span></span></span>还小的数将无法表示。 并且由于指数和浮点的位置可以相互影响。我们往往会尽量地把整数部分左移（同时减少指数）来保证更高的精度（这也是IEEE的标准）</p></li></ul> <p><strong>舍入</strong>
左移溢出， 右移舍入。</p> <p><strong>浮点数加法</strong></p> <p><strong>浮点数乘法</strong></p> <h4 id="数据在内存中的形式"><a href="#数据在内存中的形式" class="header-anchor">#</a> 数据在内存中的形式</h4> <p>关于大端和小端如何记忆</p> <ol><li>关于为什么要有小端，如果熟悉两个二进制按照位 进行加减乘除的同学（cpu的整数加法实现或者c实现大数运算）知道，计算机都是从一个数的低位开始运算，并不断传递进位的。那么小端其实就是这样设计的。这也就是为什么， 常见的x86和arm处理器都采用小端规则。
<blockquote><p>我们假设一个8个字节的整数， 32位的计算机， 每次只能取4个字节的数据，为了完成两个8字节整数的运算，我们需要先取两个数第4个字节进行运算。结果存入结果内存的低四个字节，进位参与高4个字节的运算，结果存入高四个字节。这是一个比较直觉的设计。
<strong>另外小端也只是字节之间是从低到高</strong>。 字节内部其实还是从高位往低位的。 因此每个字节内部也是方便书写和阅读的。</p></blockquote></li></ol> <div class="language-c++ line-numbers-mode"><pre class="language-text"><code>int main(){
    int x = 0x00007fab;
    unsigned char *point = (unsigned char *)&amp;x;
    size_t len = sizeof(int)/sizeof(char);
    for (size_t i=0;i&lt;len;i++) {
        printf(&quot;%p\t0x%.2x\n&quot;, point+i, *(point+i));
    }
    return 0;
}
// 0x7ffeea51c370  0xab
// 0x7ffeea51c371  0x7f
// 0x7ffeea51c372  0x00
// 0x7ffeea51c373  0x00
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol start="2"><li>大端其实就是便于书写和阅读。</li></ol> <h3 id="第二章-机器指令和程序"><a href="#第二章-机器指令和程序" class="header-anchor">#</a> 第二章：机器指令和程序</h3> <h4 id="学习目标-2"><a href="#学习目标-2" class="header-anchor">#</a> 学习目标</h4> <ol><li>了解基本的 CPU 架构，以及 CPU 如何进行指令计算</li> <li>掌握基本的汇编语法，常见的寻址方式和运算方式</li> <li>理解如何通过条件代码进行流程控制</li> <li>理解过程调用和递归的底层实现机制</li> <li>理解数据在内存中的存储方式</li> <li>了解程序在内存中的组织形式以及缓冲区溢出漏洞攻击</li> <li>利用代码执行的机制来优化已有代码</li></ol> <p>addtion: 动态调试和逆向实践</p> <h4 id="基础知识"><a href="#基础知识" class="header-anchor">#</a> 基础知识</h4> <p><strong>从C到机器代码</strong></p> <ol><li>汇编代码是机器指令的翻译，是可读形式。因此从汇编入手我们可以更好地指导机器时如何运作的。</li> <li>C语言代码经过编译，汇编，静态链接变成真正的可执行程序</li> <li>汇编代码一般由操作符+1~3个逗号隔开的操作数组成。</li> <li>处理器能够执行的操作十分有限，简单来说只有三种：存取数据、计算和传输控制
<ol><li>事实上处理器由运算器（LRU）、控制器、以及缓存组成。自然对应着上述的三个功能。当然对于处理器来说，存取数据是指向内存存取数据。但是对于汇编代码会涉及到向某个寄存器存储数据</li> <li></li></ol></li></ol> <p>x86-64的几个通用寄存器的名字解释,其中r是64位的寄存器，e是32位的寄存器。 r-&gt;egister,p-&gt;point</p> <ul><li>%rax(%eax) 用于做累加 a-&gt;acc，</li> <li>%rcx(%ecx) 用于计数 c-&gt;count</li> <li>%rdx(%edx) 用于保存数据 d指的是？？</li> <li>%rbx(%ebx) 用于做内存查找的基础地址 b-&gt;base指的是内存查找的基地址</li> <li>%rsi(%esi) 用于保存源索引值 si -&gt; source index</li> <li>%rdi(%edi) 用于保存目标索引值 di -&gt; destination index</li> <li>%rsp(%esp) 栈指针 sp -&gt; stack point</li> <li>%rbp(%ebp) 基指针（与rbx不同的是rbp一般用于指令寻址？？）bp -&gt; base point</li></ul> <p>操作数分为3种基本类型</p> <ol><li>Imm $0x5</li> <li>Reg %rax</li> <li>Mem (%rdx)  ()表示访存，即M[%rdx]， 内存中%rdx指向地址的内容。</li></ol> <blockquote><p>这里有一点需要注意， 计算机看到%rax这样的寄存器的时候，事实上就是%rax里面的地址（也就是寄存器存的值），而非寄存器的地址。
而在内存中，0x00001abc这样的内存地址则是地址本身。
举个例子， 比如%rdx存放着0x00001abc，0x00001abc存放着0x1ABC的数据
那%rdx == 0x00001abc, (%rdx) == (0x00001abc) == (0x1ABC)</p></blockquote> <p>寻址的通用表达式（可以缺省）<code>D(Rb, Ri, S) -&gt; Mem[Reg[Rb]+S*Reg[Ri]+D]</code>， 最基本的的就是(Rb)只有寄存器的地址值。</p> <p>了解了寻址之后，我们来看看运算指令，这里以 leaq 指令为例子。具体格式为 leaq Src, Dst，其中 Src 是地址的表达式，然后把计算的值存入 Dst 指定的寄存器，也就是说，无须内存引用就可以计算，类似于 p = &amp;x[i];。我们来看一个具体的例子，假设一个 C 函数是：</p> <p>long m12(long x)
{
return x * 12;
}
对应的汇编代码为：</p> <p>leaq (%rdi, %rdi, 2), %rax # t &lt;- x+x*2
salq $2, %rax              # return t &lt;&lt; 2
可以看到是直接对 %rdi 寄存器中存的数据（地址）进行运算，然后赋值给 %rax。最后给出一些常见的算术运算指令，注意参数的顺序，而且对于有符号和无符号数都是一样的，</p> <blockquote><p>这里其实做了一个化简操作 x<em>12 -&gt; (x+x</em>2)<em>4 -&gt; 是把x放到了%rdi中， 然后 (%rdi, %rdi, 2) 就被翻译成 x+2</em>x</p></blockquote> <p>下面的汇编指令可以参照着(汇编语言指令英文全称对照表)[https://www.bilibili.com/read/cv6166473]进行阅读</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6ab81a05.js" defer></script><script src="/assets/js/6.28ea8b1c.js" defer></script><script src="/assets/js/16.9c359298.js" defer></script>
  </body>
</html>
